#!/usr/bin/env bash

docker run --rm -i -v ~/git/llvm:/llvm -v ~/git/ccls:/ccls -v /tmp:/host/tmp -v /home/amos/.cache/.ccls_cached_index_docker:/ccls_cached_index -v /home/amos/git:/home/amos/git amosbird/clickhouse-build /ccls/docker-release/ccls --log-file=/host/tmp/cq.txt --init="{\"cacheFormat\": \"blob\", \"cacheDirectory\": \"/ccls_cached_index\", \"client\": {\"snippetSupport\": true}, \"index\": {\"trackDependency\": 2, \"comments\": 0}, \"diagnostics\": {\"onChange\": 1000}, \"completion\": {\"includeWhitelist\": [\"ccutils\", \"/usr/(local/)?include/(sys/)?[^/]+\\\\.h$\"], \"includeBlacklist\": [\"/usr/include/c++/4.8.5\",\"(x86_64-redhat-linux|x86_64-pc-linux-gnu)/(32|bits|tr1|tr2|parallel|experimental|profile|ext|debug)/\", \"^/usr/(local/)?include/c\\\\+\\\\+/[0-9\\\\.]+/(bits|tr1|tr2|parallel|experimental|profile|ext|debug)/\", \"^/usr/(local/)?include/c\\\\+\\\\+/v1/\", \"^/usr/(local/)?include/(?!c\\\\+\\\\+).+\"]}, \"clang\": {\"excludeArgs\": [\"-fno-tree-loop-distribute-patterns\"], \"extraArgs\": [\"-D__cpp_deduction_guides=0\", \"-Wno-macro-redefined\"]}}"
