set $darkred       #d3869b
set $red           #fb4934
set $darkgreen     #98971a
set $green         #b8bb26
set $darkyellow    #6959cd
set $yellow        #fabd2f
set $darkblue      #253366
set $blue          #83a598
set $darkmagenta   #b16286
set $magenta       #d3869b
set $darkcyan      #689d6a
set $cyan          #8ec07c
set $darkwhite     #a89984
set $white         #ebdbb2

set $black         #000000
set $grey          #666666

set $transparent   #00000000

set $height 34
set $editor termite

# workspace_layout tabbed

# Constants
set $mod Mod4

set $ws1 ""
set $ws2 ""
set $ws3 ""

# for_window [workspace=$ws2] layout splith
# for_window [workspace=$ws3] layout splith
# for_window [workspace=$ws4] layout splith
set $ws4 ""
set $ws5 ""
set $ws6 ""
set $ws7 ""
set $ws8 ""
set $ws9 ""
set $ws0 ""
set $wsa ""
set $wsb ""
set $wsc ""
set $wsd ""
set $wse ""
set $wsf ""
set $wsp ""

# General Configuration
floating_modifier control
new_window none
new_float none

# Window-Related Bindings
bindsym $mod+q kill
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym control+mod1+k focus mode_toggle focus left
bindsym control+mod1+j focus mode_toggle focus right
bindsym control+F2 exec "/usr/bin/pulseaudio-ctl down 3"
bindsym control+F3 exec "/usr/bin/pulseaudio-ctl up 3"
bindsym control+F1 exec "/usr/bin/pulseaudio-ctl mute"
bindsym XF86AudioLowerVolume exec "/usr/bin/pulseaudio-ctl down 3"
bindsym XF86AudioRaiseVolume exec "/usr/bin/pulseaudio-ctl up 3"
bindsym XF86AudioMute exec "/usr/bin/pulseaudio-ctl mute"
bindsym XF86MonBrightnessDown exec "/usr/bin/xbacklight -5"
bindsym XF86MonBrightnessUp exec "/usr/bin/xbacklight +5"

bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+space floating toggle
bindsym $mod+f fullscreen toggle
bindsym $mod+w layout toggle tabbed splith

bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"
bindsym --release Caps_Lock exec pkill -SIGRTMIN+11 i3blocks


# Workspace-Related Bindings
bindsym control+mod1+f workspace $ws1
bindsym control+mod1+v workspace $ws2
bindsym control+mod1+e workspace $ws3
bindsym control+mod1+d workspace $ws4
bindsym control+mod1+t workspace $ws4
bindsym control+mod1+g workspace $ws5
bindsym control+mod1+i workspace $ws6
bindsym control+mod1+o workspace $ws7
bindsym control+mod1+w workspace $ws8
bindsym control+mod1+c workspace $ws0
bindsym control+mod1+p workspace $wsp

#  bindsym mod1+space workspace back_and_forth

bindsym control+mod1+Shift+f move container to workspace $ws1
bindsym control+mod1+Shift+v move container to workspace $ws2
bindsym control+mod1+Shift+e move container to workspace $ws3
bindsym control+mod1+Shift+d move container to workspace $ws4
bindsym control+mod1+Shift+t move container to workspace $ws4
bindsym control+mod1+Shift+g move container to workspace $ws5
bindsym control+mod1+Shift+i move container to workspace $ws6
bindsym control+mod1+Shift+o move container to workspace $ws7
bindsym control+mod1+Shift+w move container to workspace $ws8
bindsym control+mod1+Shift+c move container to workspace $ws0
bindsym control+mod1+Shift+p move container to workspace $wsp

bindsym $mod+Up move workspace to output up
bindsym $mod+Down move workspace to output down
bindsym $mod+Left move workspace to output left
bindsym $mod+Right move workspace to output right
for_window [window_type=normal] border pixel 0


# Program Workspaces
assign [class="Firefox"] $ws1
assign [class="Vivaldi*"] $ws1
assign [class="Luakit"] $ws1
for_window [class="Luakit"] focus
for_window [class="Firefox"] focus
for_window [class="Vivaldi*"] focus
for_window [class="qutebrowser*"] focus
assign [class="URxvt" title="mutt"] $ws2
for_window [class="URxvt" title="mutt"] focus
assign [class="URxvt" instance="mail"] $ws2
for_window [class="URxvt" instance="mail"] focus
assign [class="Emacs" title="mail-frame"] $ws2
for_window [class="Emacs" title="mail-frame"] focus
assign [class="Emacs" title="[^mail-frame]"] $ws3
for_window [class="Emacs" title="[^mail-frame]"] focus
for_window [class="Emacs"] move left
assign [class="URxvt" instance="workspace"] $ws3
for_window [class="URxvt" instance="workspace"] focus
assign [class="URxvt" title="nobida*"] $ws4
for_window [class="URxvt" title="nobida*"] focus
assign [class="st" title="nobida*"] $ws4
for_window [class="st" title="nobida*"] focus
# assign [class="URxvt" title="ubuntu"] $ws5
# for_window [class="URxvt" title="ubuntu"] focus
assign [class="netease-cloud-music"] $wsp
for_window [class="netease-cloud-music"] focus
assign [class="Foxit Reader"] $ws5
for_window [class="Foxit Reader"] focus
assign [class="jetbrains-idea"] $ws6
for_window [class="jetbrains-idea"] focus
assign [class="Eclipse"] $ws7
for_window [class="Eclipse"] focus
assign [class="VirtualBox" title="w7.*1"] $ws8
assign [class="VirtualBox" title="w7.*2"] $wsp
for_window [class="VirtualBox"] focus
assign [class="Mendeleydesktop.x86_64"] $ws9
for_window [class="Mendeleydesktop.x86_64"] focus
assign [class="Termite" instance="weechat"] $ws0
for_window [class="Termite" instance="weechat"] focus
assign [class="URxvt" title="ranger"] $ws7
for_window [class="URxvt" title="ranger"] focus
assign [ title="^pdfpc.*" window_role="presentation" ] $wsp

for_window [class="xfreerdp"] floating disable

# Floating
for_window [class="Lxappearance"] floating enable
for_window [class="dolphin"] floating enable
for_window [class="Pcmanfm"] floating enable
for_window [class="copyq"] floating enable
for_window [class="feh"] floating enable
for_window [class="GoldenDict"] floating enable
for_window [class="Seahorse"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="Telegram"] floating enable
for_window [class="Deadbeef"] floating enable
for_window [class="Pinentry"] floating enable
for_window [class="Zotero" title="Zotero Preferences"] floating enable
for_window [class="Zotero" title="Advanced Search"] floating enable
for_window [class="Zotero" title="Update"] floating enable
for_window [class="Zotero" title="ZotFile Preferences"] floating enable
for_window [class="Fcitx-config-gtk3"] floating enable
for_window [class="Emacs" instance="org-capture"] exec "/home/amos/scripts/showorg.sh", floating enable

for_window [title="^998877665544332211"] move scratchpad

# Focus
for_window [title="^urxvt_scratchpad"] move scratchpad
for_window [instance="^stardict"] move scratchpad
for_window [instance="^musicbox"] move scratchpad
for_window [instance="^tldr"] move scratchpad
for_window [instance="TelegramDesktop"] move scratchpad

font pango: monospace 0

#                        BORDER      BACKGROUND  TEXT        INDICATOR   CHILD_BORDER
client.focused           $grey      $grey      #111111  #1d2021  #1d2021
client.unfocused         $black      $black      $darkwhite      #1d2021  #1d2021
client.focused_inactive  $black     $black      $darkwhite      #1d2021  #1d2021
client.urgent            $darkyellow    $darkred    #282828      $darkred    $darkred
client.background        #282828

bar {
#    verbose yes
    status_command i3blocks
    i3bar_command i3bar -t
    position top
    font pango:monospace, FontAwesome 14
    strip_workspace_numbers yes
    separator_symbol "■"
    bindsym button4 nop
    bindsym button5 nop
    # tray_output eDP1
    # tray_output LVDS-0
    tray_padding 5
    height $height
    colors {
        statusline         $black
        background         $transparent
        separator          $transparent

#                          BORDER       BACKGROUND   TEXT
        focused_workspace  $transparent $transparent $grey
        inactive_workspace $transparent $transparent $black
        active_workspace   $transparent $transparent $black
        urgent_workspace   $darkred     $darkred     $transparent
        binding_mode       $darkred     $darkred     $transparent
    }
}
# exec_always --no-startup-id $HOME/.config/polybar/launch.sh

# bg picture
# exec_always --no-startup-id feh --bg-scale ~/dotfiles/wallpaper.jpg
exec_always --no-startup-id feh --bg-scale ~/Pictures/river.jpg
# exec_always --no-startup-id feh --bg-scale ~/Pictures/railroad.jpg
exec_always --no-startup-id test -f ~/.Xresources && xrdb -merge ~/.Xresources && pkill -SIGUSR1 compton

set $default_gaps_inner 4
set $default_gaps_outer 4
gaps inner $default_gaps_inner
gaps outer $default_gaps_outer

# workspace $ws1 gaps inner 0
# workspace $ws1 gaps outer 0
# workspace $ws9 gaps inner 0
# workspace $ws9 gaps outer 0
# workspace $ws0 gaps inner 0
# workspace $ws0 gaps outer 0

# workspace_auto_back_and_forth yes
force_display_urgency_hint 0 ms
focus_on_window_activation focus
focus_follows_mouse off

floating_minimum_size -1 x -1
floating_maximum_size -1 x -1

set $mode_resize resize
bindsym $mod+c mode "$mode_resize"
mode "$mode_resize" {
bindsym h resize shrink width 10 px or 1 ppt
bindsym j resize grow height 10 px or 1 ppt
bindsym k resize shrink height 10 px or 1 ppt
bindsym l resize grow width 10 px or 1 ppt

bindsym Shift+h resize shrink width 20 px or 5 ppt
bindsym Shift+j resize grow height 20 px or 5 ppt
bindsym Shift+k resize shrink height 20 px or 5 ppt
bindsym Shift+l resize grow width 20 px or 5 ppt

bindsym s mode "default", exec --no-startup-id $HOME/scripts/slopsize.sh

bindsym 1 mode "default", resize set 1000 600
bindsym 2 mode "default", resize set 1500 600
bindsym 3 mode "default", resize set 1200 1000

bindsym Return mode "default"
bindsym Escape mode "default"
}

set $mode_power power
bindsym $mod+p mode "$mode_power"
mode "$mode_power" {
bindsym l      mode "default", exec --no-startup-id $HOME/scripts/i3exit lock
bindsym e      mode "default", exec --no-startup-id $HOME/scripts/i3exit logout
bindsym s      mode "default", exec --no-startup-id $HOME/scripts/i3exit suspend
bindsym h      mode "default", exec --no-startup-id $HOME/scripts/i3exit hibernate
bindsym r      mode "default", exec --no-startup-id $HOME/scripts/i3exit reboot
bindsym p      mode "default", exec --no-startup-id $HOME/scripts/i3exit shutdown

bindsym Return mode "default"
bindsym Escape mode "default"
}

set $mode_gaps gaps
set $mode_gaps_outer outer gaps
set $mode_gaps_inner inner gaps
bindsym $mod+g mode "$mode_gaps"
mode "$mode_gaps" {
bindsym o      mode "$mode_gaps_outer"
bindsym i      mode "$mode_gaps_inner"

bindsym 0      mode "default", exec --no-startup-id i3-msg "gaps inner current set 0" && i3-msg "gaps outer current set 0"
bindsym d      mode "default", exec --no-startup-id i3-msg "gaps inner current set $default_gaps_inner" && i3-msg "gaps outer current set $default_gaps_outer"

bindsym Return mode "default"
bindsym Escape mode "default"
}

mode "$mode_gaps_inner" {
bindsym k  gaps inner current plus 5
bindsym j  gaps inner current minus 5
bindsym 0     mode "default", gaps inner current set 0
bindsym d     mode "default", gaps inner current set $default_gaps_inner

bindsym Shift+k  gaps inner all plus 5
bindsym Shift+j  gaps inner all minus 5
bindsym Shift+0     mode "default", gaps inner all set 0
bindsym Shift+d     mode "default", gaps inner all set $default_gaps_inner

bindsym Return mode "default"
bindsym Escape mode "default"
}

mode "$mode_gaps_outer" {
bindsym k  gaps outer current plus 5
bindsym j  gaps outer current minus 5
bindsym 0     mode "default", gaps outer current set 0
bindsym d     mode "default", gaps outer current set $default_gaps_outer

bindsym Shift+k  gaps outer all plus 5
bindsym Shift+j  gaps outer all minus 5
bindsym Shift+0     mode "default", gaps outer all set 0
bindsym Shift+d     mode "default", gaps outer all set $default_gaps_outer

bindsym Return mode "default"
bindsym Escape mode "default"
}

set $mode_brightness brightness
bindsym $mod+b mode "$mode_brightness"
mode "$mode_brightness" {
bindsym k  exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -inc 10
bindsym j  exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -dec 10
bindsym Shift+k  exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -inc 1
bindsym Shift+j  exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -dec 1

bindsym 0     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 100
bindsym 1     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 10
bindsym 2     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 20
bindsym 3     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 30
bindsym 4     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 40
bindsym 5     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 50
bindsym 6     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 60
bindsym 7     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 70
bindsym 8     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 80
bindsym 9     mode "default", exec --no-startup-id ${HOME}/scripts/backlight.sh -time 50 -set 90

bindsym Return mode "default"
bindsym Escape mode "default"
}
